<!DOCTYPE html>
<html>
<head>
  <title>AI Assistant</title>
</head>
<body>
  <h2>Ask AI</h2>
  <input id="q" placeholder="Ask something" />
  <button onclick="ask()">Ask</button>
  <p id="status"></p>
  <pre id="ans"></pre>

  <script>
    const BACKEND = "https://ai-backend-shkw.onrender.com";

    async function wakeUp() {
      document.getElementById("status").innerText = "Waking up server...";
      await fetch(BACKEND); // wake-up call
    }

    async function ask() {
      const q = document.getElementById("q").value;
      document.getElementById("status").innerText = "Thinking... (first time may take 30s)";
      
      try {
        await wakeUp();

        const res = await fetch(BACKEND + "/ask", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ question: q })
        });

        const data = await res.json();
        document.getElementById("ans").innerText = data.answer || data.error;
        document.getElementById("status").innerText = "Done ✅";

      } catch (e) {
        document.getElementById("status").innerText = "Server waking up… try again in 10 sec";
      }
    }
  </script>
</body>
</html>
